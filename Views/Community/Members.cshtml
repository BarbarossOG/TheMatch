@{
    ViewData["Title"] = "Members";
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/members-page.css" />
<link rel="stylesheet" href="/css/profileinfo.css">

<div class="member-main-container" style="margin-top: 100px;">
    <!-- Фильтр -->
    <form class="member-filter" id="memberFilterForm">
        <div class="filter-title">Фильтр</div>
        <div class="filter-group">
            <label class="filter-label">Возраст: <span id="ageValue">18-35</span></label>
            <div class="filter-range">
                <input type="range" id="ageMin" name="ageMin" min="18" max="60" value="18">
                <span>-</span>
                <input type="range" id="ageMax" name="ageMax" min="18" max="60" value="35">
            </div>
        </div>
        <div class="filter-group">
            <label class="filter-label">Рост: <span id="heightValue">150-200</span></label>
            <div class="filter-range">
                <input type="range" id="heightMin" name="heightMin" min="140" max="230" value="150">
                <span>-</span>
                <input type="range" id="heightMax" name="heightMax" min="140" max="230" value="200">
            </div>
        </div>
        <div class="filter-group">
            <button type="button" class="filter-city-btn" id="chooseCityBtn" data-toggle="modal" data-target="#cityModal">Город</button>
            <div id="selectedCity" style="margin-top:6px;color:#444;font-size:0.98em;"></div>
        </div>
        <div class="filter-group">
            <button type="button" class="filter-interests-btn" id="chooseInterestsBtn" data-toggle="modal" data-target="#interestsModal">Интересы</button>
            <div id="selectedInterests" style="margin-top:6px;color:#444;font-size:0.98em;"></div>
        </div>
        <button type="submit" class="filter-apply-btn">Применить фильтр</button>
    </form>

    <!-- Карточка пользователя -->
    <div id="memberCardContainer"></div>
    <div id="noMoreMembers" style="display:none;margin-top:40px;font-size:1.2em;color:#8e44ad;font-weight:600;">Анкеты с текущими настройками фильтра закончились.</div>
</div>

<!-- Модальное окно для выбора интересов -->
<div class="modal fade" id="interestsModal" tabindex="-1" role="dialog" aria-labelledby="interestsModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="interestsModalLabel">Выберите до 3 интересов</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="filter-checkboxes small-checkboxes" id="interestsCheckboxes"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
        <button type="button" class="btn btn-primary" id="saveInterestsBtn" data-dismiss="modal">Сохранить</button>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для выбора города -->
<div class="modal fade" id="cityModal" tabindex="-1" role="dialog" aria-labelledby="cityModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cityModalLabel">Выберите город</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="filter-checkboxes small-checkboxes" id="citiesCheckboxes"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
        <button type="button" class="btn btn-primary" id="saveCityBtn" data-dismiss="modal">Сохранить</button>
      </div>
    </div>
  </div>
</div>

<script>
function updateAgeValue() {
    var min = document.getElementById('ageMin').value;
    var max = document.getElementById('ageMax').value;
    if (parseInt(min) > parseInt(max)) {
        var t = min;
        min = max;
        max = t;
    }
    document.getElementById('ageValue').innerText = min + '-' + max;
}
function updateHeightValue() {
    var min = document.getElementById('heightMin').value;
    var max = document.getElementById('heightMax').value;
    if (parseInt(min) > parseInt(max)) {
        var t = min;
        min = max;
        max = t;
    }
    document.getElementById('heightValue').innerText = min + '-' + max;
}
document.getElementById('ageMin').addEventListener('input', updateAgeValue);
document.getElementById('ageMax').addEventListener('input', updateAgeValue);
document.getElementById('heightMin').addEventListener('input', updateHeightValue);
document.getElementById('heightMax').addEventListener('input', updateHeightValue);
window.onload = function() { updateAgeValue(); updateHeightValue(); };
</script>

<script src="/js/members.js"></script>

<style>
.compatibility-rect {
  min-width: 110px;
  min-height: 48px;
  border-radius: 12px;
  background: linear-gradient(135deg, #8e44ad 60%, #f1c40f 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 1.3em;
  font-weight: bold;
  box-shadow: 0 2px 8px rgba(142,68,173,0.15);
  margin: 10px auto 10px auto;
  padding: 6px 0 4px 0;
}
.compatibility-label {
  font-size: 0.95em;
  font-weight: 500;
  margin-top: 2px;
  color: #fff;
  opacity: 0.93;
  letter-spacing: 0.3px;
}
</style> 